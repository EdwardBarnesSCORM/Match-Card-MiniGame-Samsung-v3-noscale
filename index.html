<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover" />
<title>Samsung Memory Game</title>
<style>
  :root { --w:382px; --h:780px; --scale:1; }
  body {
    margin:0;
    font-family:system-ui, Arial, sans-serif;
    text-align:center;
    padding:2rem;
    background:#f8f8f8;
  }

  h1 { margin-top:0; }
  .btn {
    padding:.75rem 1.25rem;
    border:0; border-radius:10px;
    background:#111; color:#fff; font-size:1rem; cursor:pointer;
  }

  /* Lightbox overlay */
  .lightbox {
    position: fixed; inset: 0;
    display: none; align-items: center; justify-content: center;
    background: rgba(0,0,0,.72);
    z-index: 9999;
    overflow:hidden; /* no bleed */
    padding:
      max(16px, env(safe-area-inset-top))
      max(16px, env(safe-area-inset-right))
      max(16px, env(safe-area-inset-bottom))
      max(16px, env(safe-area-inset-left));
  }
  .lightbox.active { display:flex; }

  /* Fixed-size stage that scales from CENTER */
  .stage {
    position: relative;
    width: var(--w); height: var(--h);
    background:#000; border-radius:12px; overflow:hidden;
    box-shadow:0 20px 60px rgba(0,0,0,.6);
    transform: scale(var(--scale));
    transform-origin: center center;
    box-sizing: border-box;
  }

  .stage iframe {
    width:var(--w); height:var(--h);
    border:0; display:block;
  }

  .close {
    position:absolute; top:10px; right:12px; z-index:2;
    border:0; background:rgba(0,0,0,.6); color:#fff;
    border-radius:8px; padding:6px 10px; font-size:16px; cursor:pointer;
  }
</style>
</head>
<body>
  <h1>Play the Samsung Memory Game</h1>
  <p>Opens in a lightbox emulator, similar to how it would look on a LMS (Samsung Circle) THIS EMULATED VERSION IS NOT DESIGNED FOR MOBILE. For mobile use this link: https://edwardbarnesscorm.github.io/Match-Cards-MiniGame-Samsung-v2/</p>
  <button class="btn" id="open">Open Game</button>

  <div class="lightbox" id="box" aria-hidden="true">
    <div class="stage" id="stage" role="dialog" aria-modal="true" aria-label="Game">
      <button class="close" id="close" aria-label="Close">âœ•</button>
      <!-- Point this to your Captivate export -->
      <iframe src="game.html" allowfullscreen></iframe>
    </div>
  </div>

<script>
  const box   = document.getElementById('box');
  const openB = document.getElementById('open');
  const closeB= document.getElementById('close');

  const W = 382, H = 780;

  function viewportSize() {
    const vv = window.visualViewport;
    return vv ? { w: vv.width, h: vv.height }
              : { w: document.documentElement.clientWidth,
                  h: document.documentElement.clientHeight };
  }

  function fit() {
    const { w, h } = viewportSize();

    // Read overlay padding (includes safe-area) and subtract a tiny hard margin
    const cs   = getComputedStyle(box);
    const padX = parseFloat(cs.paddingLeft) + parseFloat(cs.paddingRight);
    const padY = parseFloat(cs.paddingTop)  + parseFloat(cs.paddingBottom);
    const MARGIN = 2; // 2 CSS px to beat rounding at various DPRs

    const availW = Math.max(0, w - padX - MARGIN);
    const availH = Math.max(0, h - padY - MARGIN);

    // Epsilon keeps scale a hair under the theoretical max
    const EPS = 0.998;
    const scale = Math.min(availW / W, availH / H, 1) * EPS;

    document.documentElement.style.setProperty('--scale', String(scale));
  }

  openB.addEventListener('click', () => {
    box.classList.add('active');
    box.setAttribute('aria-hidden','false');
    fit();
  });

  closeB.addEventListener('click', () => {
    box.classList.remove('active');
    box.setAttribute('aria-hidden','true');
  });

  // Close when tapping outside the stage
  box.addEventListener('click', e => { if (e.target === box) closeB.click(); });

  // Keep fitted on rotate/resize/URL bar movement
  window.addEventListener('resize', fit);
  window.addEventListener('orientationchange', fit);
  if (window.visualViewport) {
    visualViewport.addEventListener('resize', fit);
    visualViewport.addEventListener('scroll', fit);
  }
</script>
</body>
</html>
