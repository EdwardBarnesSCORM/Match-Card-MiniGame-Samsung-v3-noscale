<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover" />
<title>Samsung Memory Game</title>
<style>
  :root { --w:382px; --h:780px; }

  /* Page (behind the lightbox) */
  body {
    margin:0;
    font-family:system-ui, Arial, sans-serif;
    text-align:center;
    padding:2rem;
    background:#48758a; /* teal page background */
    color:#fff;
  }
  h1 { margin-top:0; }
  .btn {
    padding:.75rem 1.25rem;
    border:0; border-radius:10px;
    background:#111; color:#fff; font-size:1rem; cursor:pointer;
  }

  /* Lightbox overlay */
  .lightbox {
    position: fixed; inset: 0;
    display:none; align-items:center; justify-content:center;
    background:#48758a; /* teal overlay */
    z-index:9999;
    overflow:hidden;
    padding:
      max(16px, env(safe-area-inset-top))
      max(16px, env(safe-area-inset-right))
      max(16px, env(safe-area-inset-bottom))
      max(16px, env(safe-area-inset-left));
  }
  .lightbox.active { display:flex; }

  /* Stage that holds the game iframe */
  .stage {
    position:relative;
    width: var(--w); height: var(--h);
    background:#48758a;               /* teal fill behind game */
    border: 2px solid #48758a;         /* thicker teal border masks AA seams */
    border-radius:16px; overflow:hidden;
    box-shadow:0 20px 60px rgba(0,0,0,.6);
    box-sizing:border-box;
    margin:auto;
  }
  .stage iframe {
    position:relative; z-index:1;
    width:100%; height:100%;
    border:0; display:block;
    background:#48758a !important;     /* force teal inside iframe area */
  }

  .close {
    position:absolute; top:10px; right:12px; z-index:2;
    border:0; background:rgba(0,0,0,.6); color:#fff;
    border-radius:8px; padding:6px 10px; font-size:16px; cursor:pointer;
  }
</style>
</head>
<body>
  <h1>Play the Samsung Memory Game</h1>
  <p>Opens in a centered lightbox and auto-fits on mobile.</p>
  <button class="btn" id="open">Open Game</button>

  <div class="lightbox" id="box" aria-hidden="true">
    <div class="stage" id="stage" role="dialog" aria-modal="true" aria-label="Game">
      <button class="close" id="close" aria-label="Close">âœ•</button>
      <!-- Your Captivate export -->
      <iframe src="game.html" allowfullscreen allowtransparency="false" style="background:#48758a;"></iframe>
    </div>
  </div>

<script>
  const box   = document.getElementById('box');
  const stage = document.getElementById('stage');
  const openB = document.getElementById('open');
  const closeB= document.getElementById('close');

  // Native game size
  const W = 382, H = 780;
  const GAP = 2; // small safety margin so rounding never overflows

  function viewportSize() {
    const vv = window.visualViewport;
    return vv ? { w: vv.width, h: vv.height }
              : { w: document.documentElement.clientWidth,
                  h: document.documentElement.clientHeight };
  }

  function fitBoxToViewport() {
    const { w, h } = viewportSize();

    // overlay padding (includes safe-area insets)
    const cs   = getComputedStyle(box);
    const padX = parseFloat(cs.paddingLeft) + parseFloat(cs.paddingRight);
    const padY = parseFloat(cs.paddingTop)  + parseFloat(cs.paddingBottom);

    const availW = Math.max(0, w - padX - GAP);
    const availH = Math.max(0, h - padY - GAP);

    // scale to fit (never upscale past native)
    const scale = Math.min(availW / W, availH / H, 1);

    // Rounded pixel sizes avoid sub-pixel gaps; centered via margin:auto
    const targetW = Math.round(W * scale);
    const targetH = Math.round(H * scale);

    stage.style.width  = targetW + 'px';
    stage.style.height = targetH + 'px';
  }

  openB.addEventListener('click', () => {
    box.classList.add('active');
    box.setAttribute('aria-hidden','false');
    fitBoxToViewport();
  });

  closeB.addEventListener('click', () => {
    box.classList.remove('active');
    box.setAttribute('aria-hidden','true');
  });

  // Close when tapping outside the stage
  box.addEventListener('click', e => { if (e.target === box) closeB.click(); });

  // Keep fitted on orientation/resize and mobile URL bar movement
  window.addEventListener('resize', fitBoxToViewport);
  window.addEventListener('orientationchange', fitBoxToViewport);
  if (window.visualViewport) {
    visualViewport.addEventListener('resize', fitBoxToViewport);
    visualViewport.addEventListener('scroll', fitBoxToViewport);
  }
</script>
</body>
</html>
