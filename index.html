<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover" />
<title>Game Lightbox</title>
<style>
  :root { --w:382px; --h:780px; }
  body { margin:0; font-family:system-ui, Arial, sans-serif; text-align:center; padding:2rem; }

  .btn { padding:.75rem 1rem; border:0; border-radius:10px; background:#111; color:#fff; font-size:1rem; cursor:pointer; }

  /* overlay */
  .lightbox { position:fixed; inset:0; background:rgba(0,0,0,.72); display:none; z-index:9999; }
  .lightbox.active { display:block; }

  /* the fixed‑size stage wrapper we scale */
  .stage {
    position:absolute; top:50%; left:50%;
    width:var(--w); height:var(--h);
    transform:translate(-50%,-50%) scale(1);
    transform-origin:top left;
    background:#000; border-radius:12px; overflow:hidden;
    box-shadow:0 20px 60px rgba(0,0,0,.6);
  }
  .close { position:absolute; top:8px; right:10px; z-index:2; border:0; background:rgba(0,0,0,.6); color:#fff; border-radius:8px; padding:6px 10px; font-size:16px; }

  /* keep the iframe at native size; we scale the parent instead */
  .stage iframe { width:var(--w); height:var(--h); border:0; display:block; }
</style>
</head>
<body>
  <h1>Play the Game</h1>
  <p>Opens in a lightbox and auto‑fits on mobile.</p>
  <button class="btn" id="open">Open Game</button>

  <div class="lightbox" id="box" aria-hidden="true">
    <div class="stage" id="stage" role="dialog" aria-modal="true" aria-label="Game">
      <button class="close" id="close" aria-label="Close">✕</button>
      <!-- point to your Captivate HTML (the one you showed me) -->
      <iframe src="game.html" allowfullscreen></iframe>
    </div>
  </div>

<script>
  const box   = document.getElementById('box');
  const stage = document.getElementById('stage');
  const openB = document.getElementById('open');
  const closeB= document.getElementById('close');

  const NATIVE_W = 382, NATIVE_H = 780, PADDING = 24; // inner margin so it doesn’t kiss the edges

  function fit() {
    const vw = Math.max(document.documentElement.clientWidth,  window.innerWidth  || 0);
    const vh = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
    const scale = Math.min(
      (vw - PADDING*2) / NATIVE_W,
      (vh - PADDING*2) / NATIVE_H,
      1 // never upscale past native
    );
    stage.style.transform = `translate(-50%,-50%) scale(${scale})`;
  }

  openB.addEventListener('click', () => { box.classList.add('active'); box.setAttribute('aria-hidden','false'); fit(); });
  closeB.addEventListener('click', () => { box.classList.remove('active'); box.setAttribute('aria-hidden','true'); });

  // close on overlay tap
  box.addEventListener('click', (e) => { if (e.target === box) closeB.click(); });

  // keep it fitted on rotate/resize
  window.addEventListener('resize', fit);
  window.addEventListener('orientationchange', fit);
</script>
</body>
</html>
